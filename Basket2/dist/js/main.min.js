function Carousel(e,r){this.image=e,this.price=r}var thumbailLength=3,i=0,price=0,numberProd=[],summProd=[];Carousel.prototype.basketRender=function(){for(j=0;j<this.price.length;j++)numberProd.push(1),summProd.push(0);return $("<div/>",{html:"<h4>Просто перетащите товар мышью</h4>",class:"basket"}).appendTo($("#basket")),{numberProd:numberProd,summProd:summProd}},Carousel.prototype.basketRefresh=function(e){$("#basket").droppable({drop:function(){if($(".basket").children("#basketDiv"+e).length>=1)++numberProd[e],summProd[e]=+carousel.price[e]*numberProd[e],$("#text"+e).text("Кол-во: "+numberProd[e]+"; Cтоимость: "+summProd[e]+" рублей");else{summProd[e]=+carousel.price[e]*numberProd[e];var r=$("<div/>",{id:"basketDiv"+e,class:"basket__product"}).appendTo($(".basket"));$("<img/>",{class:"basket__image",src:carousel.image[e]}).appendTo(r),$("<p/>",{id:"text"+e,text:"Кол-во: "+numberProd[e]+"; Cтоимость: "+summProd[e]+" рублей"}).appendTo(r),$("<button/>",{id:"btn"+e,onclick:'carousel.basketRemove("'+e+'")',class:"btn-small",text:"удалить"}).appendTo(r),r.effect("bounce")}return price+=+carousel.price[e],$("#summ").html(price),{price:price,numberProd:numberProd,summProd:summProd}}})},Carousel.prototype.basketRemove=function(e){$(".basket").children("#basketDiv"+e).length>=1&&(price-=+carousel.price[e],summProd[e]-=carousel.price[e],--numberProd[e],$("#summ").html(price),$("#text"+e).text("Кол-во: "+numberProd[e]+"; Cтоимость: "+summProd[e]+" рублей")),numberProd[e]||($("#btn"+e).prop("disabled",!0),$("#basketDiv"+e).effect("clip",500,function(){$(this).remove()}),numberProd[e]=1)},Carousel.prototype.render=function(e,r){var t=$("#carousel");for(t.empty(),e;e<r;e++){var a=$("<div/>",{id:e,class:"element"}).appendTo(t);$("<img/>",{id:e,src:this.image[e]}).appendTo(a),$("<p/>",{text:"Стоимость: "+this.price[e]+" рублей",class:"summ"}).appendTo(a),$(".element").draggable({revert:!0,start:function(){carousel.basketRefresh(this.id)}}),$("<div/>",{html:'<p class="helper__text">Добавить в корзину</p>',class:"helper"}).appendTo(a)}var i=$("<div/>",{}).appendTo(t);$("<div/>",{class:"arrow",id:"left",html:'<i class="fa fa-arrow-left fa-5x" aria-hidden="true"></i>'}).appendTo(i),$("<div/>",{class:"arrow",id:"right",html:'<i class="fa fa-arrow-right fa-5x" aria-hidden="true"></i>'}).appendTo(i),carousel.arrow()},Carousel.prototype.arrow=function(){$("#right").on("click",function(){thumbailLength==carousel.image.length?(i=0,thumbailLength=3,carousel.render(i,thumbailLength)):(thumbailLength++,i++,carousel.render(i,thumbailLength))}),$("#left").on("click",function(){0==i?(i=carousel.image.length-thumbailLength,thumbailLength=carousel.image.length,carousel.render(i,thumbailLength)):(thumbailLength--,i--,carousel.render(i,thumbailLength))})};var carousel=new Carousel(["images/el1.jpg","images/el2.jpg","images/el3.jpg","images/el4.jpg","images/el5.jpg"],["1000","2000","3000","4000","5000"]);carousel.basketRender(),carousel.render(i,thumbailLength);