"use strict";function Basket(t){this.id=t,this.countGoods=0,this.amount=0,this.basketItems=[],this.getBasket()}Basket.prototype.render=function(t){var e=$("<div />",{id:this.id,text:"Корзина"});$("<div />",{id:this.id+"_items"}).appendTo(e),e.appendTo(t)},Basket.prototype.getBasket=function(){var t="#"+this.id+"_items";$.get({url:"./basket.json",dataType:"json",context:this,success:function(e){var s=$("<div />",{id:"basket_data"});this.countGoods=e.basket.length,this.amount=e.amount,this.basketItems=e.basket,s.appendTo(t),this.refresh()},error:function(t){console.error("Ошибка получения корзины",t.status,t.statusText)}})},Basket.prototype.add=function(t,e,s){var i={name:t,id_product:e,price:s};this.countGoods++,this.amount+=s,this.basketItems.push(i),this.refresh()},Basket.prototype.delete=function(t){for(var e in this.basketItems)if(console.log(this.basketItems),this.basketItems[e].id_product==t){var s=this.basketItems[e].price;this.basketItems.splice(e,1),this.countGoods>0?this.countGoods--:console.log("В корзине нет товаров!"),this.amount-=s;break}this.refresh()},Basket.prototype.refresh=function(){var t=$("#basket_data");t.empty(),t.append("<p>Всего товаров: "+this.countGoods+"</p>");var e=!0,s=!1,i=void 0;try{for(var a,o=this.basketItems[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var n=a.value;t.append("<p>"+n.name+"</p>");var r=$("<button />",{class:"deleteitem",dataid:n.id_product,text:"Удалить товар"});t.append(r)}}catch(t){s=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(s)throw i}}t.append("<p>Сумма: "+this.amount+" руб.</p>"),this.basketItems.length>0&&t.append('<input type = "submit" id = "submit" value = "Оформить заказ">')},$(document).ready(function(){setInterval(function(){$("#carousel ul").animate({marginLeft:-350},2e3,function(){$(this).find("li:last").after($(this).find("li:first")),$(this).css({marginLeft:0})})},5e3)});